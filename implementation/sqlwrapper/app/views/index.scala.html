

@import de.unipassau.medspace.common.SQL.ConnectionPool
@(service: de.unipassau.medspace.SQLWrapperService,
        config: de.unipassau.medspace.d2r.config.Configuration,
        connectionPool: ConnectionPool,
        metaData: java.sql.DatabaseMetaData)

@main("SQL Wrapper(D2R)") {
  <h1>SQL Wrapper(D2R) status page</h1>

  <h4>Services</h4>
  <p>keyword search query service:</p>
  <ul>
    <li>param keywords: The kexword to search for</li>
    <li>param attach: Should the keyword seach result be attached as a file? (Only relevant when using a browser)</li>
    <li>url: <bold>@routes.SQLWrapperController.search("keyword1 keyword2",false).url</bold></li>
    <li>Keyword search test page(GUI): </li>
  </ul>

  <h4>Index</h4>

  Index is used: @config.isIndexUsed()

  <br>

  @if(config.isIndexUsed()) {
    Index Directory: @config.getIndexDirectory().toString() <br>
  }

  <h4>Datasource</h4>

  Database-Product: @metaData.getDatabaseProductName() <br>
  Database-Product-Version: @metaData.getDatabaseProductVersion() <br>
  Driver: @metaData.getDriverName() <br>
  Driver-Version: @metaData.getDriverVersion() <br>

  JDBC-Driver: @config.getJdbcDriver().getName()  <br>
  JDBC-URL: @config.getJdbc() <br>

  Max connections: @metaData.getMaxConnections <br>
  Max row size: @metaData.getMaxRowSize <br>

  <h4>Connection Pool</h4>

  Max connection pool size: @connectionPool.getMaxPoolSize() <br>
  Number active connections: @connectionPool.getActiveConnectionsNumber <br>
  Number idle connections: @connectionPool.getIdleConnectionsNumber <br>
  Number total connections: @connectionPool.getTotalConnectionsNumber <br>
}
